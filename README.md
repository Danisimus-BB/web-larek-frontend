# Проектная работа "Веб-ларек"

Интернет-магазин с каталогом товаров, корзиной и оформлением заказа. Проект построен на основе архитектуры MVP с использованием TypeScript.

## Технологический стек
- **HTML5** - семантическая структура страницы
- **SCSS** - стилизация компонентов по методологии БЭМ
- **TypeScript** - типизированный JavaScript
- **Webpack** - сборка проекта

## Структура проекта
- **src/** — исходные файлы проекта
  - **components/** — компоненты приложения
    - **base/** — базовые классы и интерфейсы (Component, Model, EventEmitter, Api)
  - **common.blocks/** — стили компонентов по БЭМ методологии
  - **store/** — хранилище данных 
  - **services/** — сервисы для работы с API
  - **utils/** — утилиты и вспомогательные функции
  - **types/** — типы и интерфейсы
  - **pages/** — HTML-шаблоны
  - **scss/** — стили
  - **images/** — изображения проекта
  - **index.ts** — точка входа приложения и слой Presenter

## Установка и запуск

### Установка зависимостей
```
npm install
```
или
```
yarn
```

### Запуск в режиме разработки
```
npm run start
```
или
```
yarn start
```

### Сборка проекта
```
npm run build
```
или
```
yarn build
```

## Архитектура MVP

Проект реализован с использованием архитектурного паттерна MVP (Model-View-Presenter):

### Model (Модель)
Отвечает за данные и бизнес-логику:
- Хранение состояния приложения
- Валидация данных
- Взаимодействие с API
- Обработка данных

### View (Представление)
Отвечает за отображение данных и взаимодействие с пользователем:
- Отрисовка интерфейса
- Обработка пользовательского ввода
- Генерация событий для Presenter

### Presenter (Презентер)
Связывает Model и View:
- Реагирует на события пользовательского интерфейса
- Запрашивает данные от Model
- Обновляет View на основе изменений в Model
- Реализован через систему событий EventEmitter

## Ключевые компоненты

### Базовые классы

#### `Component<T>` (components/base/Component.ts)
Абстрактный класс для всех компонентов пользовательского интерфейса:
- Управление состоянием компонента
- Методы для работы с DOM-элементами
- Рендеринг компонентов

#### `Model<T>` (components/base/Model.ts)
Абстрактный класс для моделей данных:
- Хранение данных
- Обновление данных
- Валидация данных
- Генерация событий при изменении данных

#### `EventEmitter` (components/base/events.ts)
Реализует паттерн "Издатель-подписчик":
- Подписка на события
- Отписка от событий
- Инициирование событий
- Поддержка регулярных выражений для групповой обработки событий

#### `Api` (components/base/api.ts)
Класс для работы с REST API:
- GET/POST запросы
- Обработка ответов и ошибок

### Компоненты представления

#### `Card` и `BasketCard` (components/Card.ts)
Компоненты для отображения карточек товаров:
- Отображение информации о товаре
- Обработка взаимодействия пользователя с карточкой
- Полностью кликабельная карточка товара

#### `Modal` (components/Modal.ts)
Компонент для отображения модальных окон:
- Открытие/закрытие модального окна
- Отображение различного контента
- Обработка нажатия клавиши Escape

#### `Basket` (components/Basket.ts)
Компонент для работы с корзиной покупок:
- Отображение товаров в корзине
- Расчет общей стоимости
- Удаление товаров из корзины

#### `Page` (components/Page.ts)
Основной компонент страницы:
- Управление каталогом товаров
- Отображение счетчика товаров в корзине
- Блокировка прокрутки при открытом модальном окне

#### Компоненты оформления заказа
- `OrderContacts` - форма ввода контактных данных
- `OrderPayment` - форма выбора способа оплаты
- `Success` - сообщение об успешном оформлении заказа

### Модели данных

#### `ProductsData`
Модель для работы с каталогом товаров:
- Хранение списка товаров
- Выбор товара для просмотра
- Фильтрация товаров

#### `BasketData`
Модель для работы с корзиной:
- Добавление/удаление товаров
- Расчет общей стоимости
- Передача данных в заказ

#### `OrderData`
Модель для работы с данными заказа:
- Сбор данных для оформления заказа
- Валидация данных
- Форматирование данных для отправки

## Система событий

Проект использует централизованную систему событий для связи между компонентами:

### Ключевые события
- `card:change` - обновление списка карточек товаров
- `card:selected` - выбор карточки товара для просмотра
- `preview:change` - изменение предпросмотра товара
- `basket:change` - изменение содержимого корзины
- `basket:open` - открытие корзины
- `order:change` - изменение данных заказа
- `order:submit` - отправка формы заказа
- `contacts:submit` - отправка контактных данных
- `modal:open`, `modal:close` - управление модальными окнами

## Типы данных

### Товар (ICard)
```typescript
interface ICard {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number | null;
  selected: boolean;
}
```

### Заказ (IOrder)
```typescript
interface IOrder {
  total: number;
  items: string[];
  email: string;
  phone: string;
  address: string;
  payment: PaymentType;
}
```

## Особенности реализации

- **Полностью кликабельные карточки** - вместо отдельной кнопки "В корзину"
- **Модальное окно с детальной информацией** - при клике на товар
- **Корзина с возможностью редактирования** - удаление товаров
- **Двухшаговая форма оформления заказа** - с валидацией данных
- **Оптимизированная прокрутка** - отсутствие прыжка страницы при открытии модальных окон
- **Визуальные эффекты** - анимация при наведении на карточки и взаимодействии
